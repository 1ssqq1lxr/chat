<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
    <script type="text/javascript">
        console.log("connecting");
        var token;

        websocket = new WebSocket("ws://localhost:8080/chat");

        websocket.onopen = function(evt) {
            console.log("connected");

            var shake = {
                header: {
                    'type': 2
                }
            };


            var data = {
                'header': {
                    'type': 0,
                    'token': 'token',
                    'targetMemId': 0,
                    'clientTime': 'time',
                    'memId': '0'
                },

                'content': 'hello'

            };

            websocket.send(JSON.stringify(shake));
            websocket.send(JSON.stringify(data));
        };

        websocket.onclose = function(evt) {
            console.log("closed");
        };

        websocket.onerror = function(evt) {
            console.log("error:" + evt);
        }

        websocket.onmessage = function(evt) {
            console.log("msg:" + evt.data);

            var d = eval('(' + evt.data + ')')
            console.log(d);

        };


    </script>
</body>
</html>